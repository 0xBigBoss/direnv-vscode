layout node

# You can define your system-specific logic (like Git settings or GH tokens) in .envrc.local
# If that logic is usable by other people and might improve development environment, consider
# contributing it to this file â™¥

watch_file .envrc.local
[ -f .envrc.local ] && {
    source .envrc.local    
}

if [ -z "${DONTNIX}" ] && has nix; then

      if has lorri && has use_lorri; then
        # use lorri if we're lucky
        eval "$(lorri direnv)"

    elif nix flake metadata >/dev/null 2>&1 && has use_flake; then
        # use flakes if possible
        use flake

    else
        # Otherwise fall back to pure nix
        use nix
    fi

fi

